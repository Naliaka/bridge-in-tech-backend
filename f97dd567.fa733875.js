(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{81:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return p}));var a=n(3),r=n(7),o=(n(0),n(86)),i={id:"Environment-Setup-Instructions",title:"Environment Setup Instructions"},c={unversionedId:"Environment-Setup-Instructions",id:"Environment-Setup-Instructions",isDocsHomePage:!1,title:"Environment Setup Instructions",description:"Before you start, you need to have the following installed:",source:"@site/docs/Environment-Setup-Instructions.md",slug:"/Environment-Setup-Instructions",permalink:"/bridge-in-tech-backend/docs/Environment-Setup-Instructions",editUrl:"https://github.com/anitab-org/bridge-in-tech-backend/edit/develop/docs/docs/Environment-Setup-Instructions.md",version:"current",sidebar:"docs",previous:{title:"Fork, Clone & Remote",permalink:"/bridge-in-tech-backend/docs/Fork,-Clone-&-Remote"},next:{title:"Project Ideas",permalink:"/bridge-in-tech-backend/docs/Project-Ideas"}},s=[{value:"1st, Fork, Clone and Remote",id:"1st-fork-clone-and-remote",children:[]},{value:"2nd, Create a new virtual environment",id:"2nd-create-a-new-virtual-environment",children:[]},{value:"3rd, Create the main database",id:"3rd-create-the-main-database",children:[]},{value:"4th, Open <strong>pgAdmin4</strong>",id:"4th-open-pgadmin4",children:[]},{value:"5th, Create and set bit_schema_test",id:"5th-create-and-set-bit_schema_test",children:[]},{value:"6th, Modify search path to include the new schema bitschema",id:"6th-modify-search-path-to-include-the-new-schema-bitschema",children:[]},{value:"7th, Create the <code>.env</code> file using <code>.env.template</code>",id:"7th-create-the-env-file-using-envtemplate",children:[]},{value:"8th, Run unittest",id:"8th-run-unittest",children:[]},{value:"9th, Connect to MS-for-BIT backend server",id:"9th-connect-to-ms-for-bit-backend-server",children:[]}],b={toc:s};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Before you start, you need to have the following installed:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://www.enterprisedb.com/downloads/postgres-postgresql-downloads"},"PostgreSQL database")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://www.pgadmin.org"},"pgAdmin4"))),Object(o.b)("p",null,"After you downloaded the above, connect the pgadmin4 to your postgresql local server by following the instruction ",Object(o.b)("a",{parentName:"p",href:"https://www.enterprisedb.com/postgres-tutorials/connecting-postgresql-using-psql-and-pgadmin"},"here")),Object(o.b)("p",null,"If you have these already installed, you are ready to start."),Object(o.b)("h2",{id:"1st-fork-clone-and-remote"},"1st, Fork, Clone and Remote"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"Follow the instruction on the ",Object(o.b)("a",{parentName:"li",href:"/bridge-in-tech-backend/docs/Fork,-Clone-&-Remote"},"Fork, Clone, and Remote")," page for this step.")),Object(o.b)("h2",{id:"2nd-create-a-new-virtual-environment"},"2nd, Create a new virtual environment"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Create a new virtual environment: ",Object(o.b)("inlineCode",{parentName:"p"},"virtualenv venv --python=python3"),". Note: Do not use the same virtual environment for Mentorship System and BIT.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Activate the virtual environment: ",Object(o.b)("inlineCode",{parentName:"p"},"source ./venv/bin/activate")),Object(o.b)("p",{parentName:"li"},"For git bash users : ",Object(o.b)("inlineCode",{parentName:"p"},"source ./venv/Scripts/activate")),Object(o.b)("p",{parentName:"li"},"For cmd users : ",Object(o.b)("inlineCode",{parentName:"p"},"venv\\Scripts\\activate")))),Object(o.b)("p",null,"Install all dependencies in the ",Object(o.b)("inlineCode",{parentName:"p"},"requirements.txt")," file: ",Object(o.b)("inlineCode",{parentName:"p"},"pip install -r requirements.txt")),Object(o.b)("h2",{id:"3rd-create-the-main-database"},"3rd, Create the main database"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Run postgresql shell command: ",Object(o.b)("inlineCode",{parentName:"p"},"psql"),". ")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},'Create database, name it "bit_schema": ',Object(o.b)("inlineCode",{parentName:"p"},"create DATABASE bit_schema;"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"If you are not currently connected as ",Object(o.b)("inlineCode",{parentName:"p"},"postgres"),", run the following to connect to the database you've just created as the superuser ",Object(o.b)("inlineCode",{parentName:"p"},"postgres"),"."),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"}," \\c bit_schema postgres")))),Object(o.b)("img",{width:"971",alt:"Screen Shot 2020-09-18 at 7 02 31 am",src:"https://user-images.githubusercontent.com/45851538/93510910-9e6b5b80-f92a-11ea-924b-04d89d9ea446.png"}),Object(o.b)("ol",{start:4},Object(o.b)("li",{parentName:"ol"},"Create the BIT schema: ",Object(o.b)("inlineCode",{parentName:"li"},"create schema bitschema;")),Object(o.b)("li",{parentName:"ol"},"Confirm to check the new schema has been added. ")),Object(o.b)("p",null,"You should see 2 schemas, public and bitschema."),Object(o.b)("img",{width:"971",alt:"Screen Shot 2020-09-18 at 8 30 30 am",src:"https://user-images.githubusercontent.com/45851538/93559344-2fbceb00-f988-11ea-8053-e42659f523db.png"}),Object(o.b)("p",null,"You can now closed the psql shell by typing ",Object(o.b)("inlineCode",{parentName:"p"},"\\q")," and hit ",Object(o.b)("inlineCode",{parentName:"p"},"enter"),"."),Object(o.b)("h2",{id:"4th-open-pgadmin4"},"4th, Open ",Object(o.b)("strong",{parentName:"h2"},"pgAdmin4")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("h3",{parentName:"li",id:"set-bit_schema-database-permissions"},"Set bit_schema database permissions"),"You should see the local_data and when you expand the arrow, you should see the 2 schemas.")),Object(o.b)("img",{width:"154",alt:"Screen Shot 2020-06-14 at 9 55 03 pm",src:"https://user-images.githubusercontent.com/29667122/84592555-e2f9dd80-ae89-11ea-91b7-322605111961.png"}),Object(o.b)("p",null,"By default, ",Object(o.b)("inlineCode",{parentName:"p"},"public")," schema will be accessible to ",Object(o.b)("inlineCode",{parentName:"p"},"PUBLIC")," and ",Object(o.b)("inlineCode",{parentName:"p"},"postgres")," users. We need to make sure ",Object(o.b)("inlineCode",{parentName:"p"},"bitschema")," and ",Object(o.b)("inlineCode",{parentName:"p"},"bit_schema")," also have the same permission settings.\nTo do this, click on ",Object(o.b)("inlineCode",{parentName:"p"},"bit_schema")," on the left sidebar, go to ",Object(o.b)("inlineCode",{parentName:"p"},"Properties")," (top navbar) > ",Object(o.b)("inlineCode",{parentName:"p"},"Edit")," (top right) and adjust the settings under the ",Object(o.b)("inlineCode",{parentName:"p"},"Security")," tab to look like the screenshots below. Do the same with ",Object(o.b)("inlineCode",{parentName:"p"},"bitschema"),"."),Object(o.b)("img",{width:"620",alt:"Screen Shot 2020-05-07 at 7 47 39 pm",src:"https://user-images.githubusercontent.com/29667122/81332957-2f156d80-90e7-11ea-9e15-53a607542388.png"}),Object(o.b)("p",null,"Note: If you happened to create the ",Object(o.b)("inlineCode",{parentName:"p"},"bit_schema")," under your username instead of ",Object(o.b)("inlineCode",{parentName:"p"},"postgres"),", don't worry, don't change anything else, just add ",Object(o.b)("inlineCode",{parentName:"p"},"PUBLIC")," access on top of the existing one."),Object(o.b)("h2",{id:"5th-create-and-set-bit_schema_test"},"5th, Create and set bit_schema_test"),Object(o.b)("p",null,"To set up the test database, do the same steps as creating ",Object(o.b)("inlineCode",{parentName:"p"},"bit_schema")," above (see ",Object(o.b)("inlineCode",{parentName:"p"},"3rd")," step), but change the name to ",Object(o.b)("inlineCode",{parentName:"p"},"bit_schema_test")," instead. Don't forget to also create ",Object(o.b)("inlineCode",{parentName:"p"},"bitschema")," as well as ",Object(o.b)("a",{parentName:"p",href:"https://github.com/sqlalchemy/sqlalchemy/blob/master/README.unittests.rst"},"2 other required schemas for PostgreSQL tests"),": ",Object(o.b)("strong",{parentName:"p"},"test_schema")," and ",Object(o.b)("strong",{parentName:"p"},"test_schema_2"),". Remember to change the permission settings to include ",Object(o.b)("inlineCode",{parentName:"p"},"PUBLIC")," in all added schemas.\nYour ",Object(o.b)("strong",{parentName:"p"},"bit_schema_test")," database should look like this screenshot now."),Object(o.b)("img",{width:"171",alt:"Screen Shot 2020-06-14 at 9 57 41 pm",src:"https://user-images.githubusercontent.com/29667122/84592600-2eac8700-ae8a-11ea-9035-c449068bdd7a.png"}),Object(o.b)("h2",{id:"6th-modify-search-path-to-include-the-new-schema-bitschema"},"6th, Modify search path to include the new schema bitschema"),Object(o.b)("p",null,"To make sure the second schema bitschema is discoverable, set the search_path to bitschema and public from the terminal. The steps are as followed:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Run the command below to make sure we have 2 schemas already in the database"),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},'$ psql -c "\\dn;" -U postgres -d bit_schema')))),Object(o.b)("p",null,"you should see the following"),Object(o.b)("img",{width:"971",alt:"Screen Shot 2020-06-28 at 2 56 28 pm",src:"https://user-images.githubusercontent.com/29667122/85938323-92858400-b94f-11ea-803b-cf2cea70d94f.png"}),Object(o.b)("ol",{start:2},Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Run the next command to show the existing search_path"),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},'$ psql -c "show search_path;" -U postgres -d bit_schema')))),Object(o.b)("p",null,Object(o.b)("img",{parentName:"p",src:"https://imgur.com/ObUbS9E.jpg",alt:"Step1"})),Object(o.b)("ol",{start:3},Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Then run this command to set new search_path to both bitschema and public"),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},' psql -c "ALTER DATABASE bit_schema SET search_path TO bitschema,public;" -U postgres -d bit_schema')))),Object(o.b)("p",null,Object(o.b)("img",{parentName:"p",src:"https://imgur.com/jHhuq3K.jpg",alt:"Step2"})),Object(o.b)("ol",{start:4},Object(o.b)("li",{parentName:"ol"},"Finally, run the same command on step 2 to check if the new path has been set")),Object(o.b)("p",null,Object(o.b)("img",{parentName:"p",src:"https://imgur.com/bsuoU6e.jpg",alt:"Step3"})),Object(o.b)("p",null,"Do the same steps to set new search_path on bit_schema_test. You just need to set bitschema and public as it is done here (no need to set search path for test_schema and test_schema_2 as there are the default postgresql test schemas)"),Object(o.b)("p",null,"Now when you run the application using ",Object(o.b)("inlineCode",{parentName:"p"},"python run.py")," (after first completing step 7) from the terminal, you should see that the tables are created under each schemas."),Object(o.b)("img",{width:"647",alt:"Screen Shot 2020-07-15 at 5 39 46 pm",src:"https://user-images.githubusercontent.com/29667122/87517460-38f8b580-c6c2-11ea-9bfb-a0117f0ee848.png"}),Object(o.b)("h2",{id:"7th-create-the-env-file-using-envtemplate"},"7th, Create the ",Object(o.b)("inlineCode",{parentName:"h2"},".env")," file using ",Object(o.b)("inlineCode",{parentName:"h2"},".env.template")),Object(o.b)("p",null,"Update the values of corresponding environment variables or make sure you exported the following environment variables:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"export FLASK_ENVIRONMENT_CONFIG = <local-or-dev-or-test-or-prod>\nexport SECRET_KEY = <your-secret-key>\nexport SECURITY_PASSWORD_SALT = <your-security-password-salt>\nexport MAIL_DEFAULT_SENDER = <mail-default-sender>\nexport MAIL_SERVER = <mail-server>\nexport APP_MAIL_USERNAME = <app-mail-username>\nexport APP_MAIL_PASSWORD = <app-mail-password>\nexport MOCK_EMAIL = <True-or-False>\nexport FLASK_APP=run.py\n")),Object(o.b)("p",null,"NOTE: If you are on a Windows or Linux OS, you must do the following steps to allow connection to your local postgresql database:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Go to ",Object(o.b)("inlineCode",{parentName:"li"},"config.py")," "),Object(o.b)("li",{parentName:"ul"},"Under ",Object(o.b)("inlineCode",{parentName:"li"},"LocalConfig"),", uncomment line 88 and comment-out line 86",Object(o.b)("img",{width:"435",alt:"Screen Shot 2020-09-27 at 5 21 14 pm",src:"https://user-images.githubusercontent.com/29667122/94358710-4a106a80-00e6-11eb-819d-18affad4236d.png"}))),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Then go back to your .env file and add your db credentials as per the following")),Object(o.b)("p",null,"Note: For Windows or Ubuntu machines, you might have to remove ",Object(o.b)("inlineCode",{parentName:"p"},"export")," from the front of these variables to make it work."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"export DB_TYPE=postgresql\nexport DB_USERNAME= <db-username>\nexport DB_PASSWORD= <db-password>\nexport DB_ENDPOINT= localhost:5432\nexport DB_NAME= bit_schema\nexport DB_TEST_NAME=bit_schema_test\n")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Important:"),"\nDepending on your OS, you can use DB_TYPE from the following options:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"* postgresql \n* postgres\n* postgresql+psycopg2\n* postgres+psycopg2\n")),Object(o.b)("p",null,"Now, you can run the app by executing the following on the terminal: ",Object(o.b)("inlineCode",{parentName:"p"},"python run.py")),Object(o.b)("p",null,"Navigate to ",Object(o.b)("inlineCode",{parentName:"p"},"http://localhost:5000")," in your browser"),Object(o.b)("p",null,"When you are done using the app, deactivate the virtual environment: ",Object(o.b)("inlineCode",{parentName:"p"},"deactivate")),Object(o.b)("h2",{id:"8th-run-unittest"},"8th, Run unittest"),Object(o.b)("p",null,"To run the unitests run the following command in the terminal (while the virtual environment is activated):"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"python -m unittest discover tests")),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Important"),"\nIf you are running test cases from Windows or Ubuntu OS, you also need to do the following extra steps to make sure the app can access your local test database:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"uncomment line 102 under the ",Object(o.b)("inlineCode",{parentName:"li"},"TestingConfig")," section in ",Object(o.b)("inlineCode",{parentName:"li"},"config.py")," and comment out line 100",Object(o.b)("img",{width:"449",alt:"Screen Shot 2020-09-27 at 5 21 50 pm",src:"https://user-images.githubusercontent.com/29667122/94358720-54caff80-00e6-11eb-871b-54a8873adc88.png"}))),Object(o.b)("h2",{id:"9th-connect-to-ms-for-bit-backend-server"},"9th, Connect to MS-for-BIT backend server"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"IMPORTANT!!! For BIT project, you need to run a BIT version of MS backend server (at least until BIT and MS backend are fully integrated)"),".\nSetup MS-for-BIT server by following the setup instruction for Mentorship Backend ",Object(o.b)("a",{parentName:"p",href:"https://github.com/anitab-org/mentorship-backend"},"here")," but using the code base from Maya Treacy's fork repository ",Object(o.b)("a",{parentName:"p",href:"https://github.com/mtreacy002/mentorship-backend/tree/ms-backend-server"},"ms-backend-server")," branch. To do this, run the following codes on the terminal after you fork and clone the MS backend repository:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-quote"},"$ git checkout -b bit-ms-backend-server develop\n$ git pull https://github.com/mtreacy002/mentorship-backend.git ms-backend-server\n")),Object(o.b)("p",null,"Follow the rest of the setup instructions (providing the environment credentials) mentioned on the ",Object(o.b)("a",{parentName:"p",href:"https://github.com/anitab-org/mentorship-backend"},"MS README Run app section"),". Note Notice that since BIT already occupies ",Object(o.b)("strong",{parentName:"p"},"port 5000")," of your localhost, the MS server is set to run on ",Object(o.b)("strong",{parentName:"p"},"port 4000")," for this BridgeInTech project."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"---")),Object(o.b)("p",null,"Now you have setup the BIT and MS backend servers which connected to one postgresql database.\nYou can run both BIT and MS backend servers and try the application starting with creating then login as a new user."),Object(o.b)("p",null,"That's it. Happy hacking \ud83d\udc4c"))}p.isMDXComponent=!0},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var b=r.a.createContext({}),p=function(e){var t=r.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},l=function(e){var t=p(e.components);return r.a.createElement(b.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},h=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,b=s(e,["components","mdxType","originalType","parentName"]),l=p(n),h=a,d=l["".concat(i,".").concat(h)]||l[h]||m[h]||o;return n?r.a.createElement(d,c(c({ref:t},b),{},{components:n})):r.a.createElement(d,c({ref:t},b))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var b=2;b<o;b++)i[b]=n[b];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);